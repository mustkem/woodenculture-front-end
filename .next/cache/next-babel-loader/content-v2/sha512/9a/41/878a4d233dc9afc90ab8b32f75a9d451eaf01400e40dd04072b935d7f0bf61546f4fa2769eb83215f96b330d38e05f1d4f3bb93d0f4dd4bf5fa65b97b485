{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { commonActions } from \"../../store/common\";\nimport { API_URL } from \"../../config\";\nimport ProductItem from \"../ProductList/components/ProductItem\";\nimport Layout from \"../Layout\";\n\nfunction Wishlist() {\n  const [wishlist, setWishlist] = React.useState(null);\n  const dispatch = useDispatch();\n  React.useEffect(() => {\n    getWishlist();\n  }, []);\n\n  const getWishlist = () => {\n    axios({\n      method: \"get\",\n      url: API_URL + \"/auth/user/wishlist\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"woodenculture-token\")\n      }\n    }).then(function (response) {\n      const updatedData = [];\n      response.data.products.forEach(item => {\n        if (item.status) {\n          updatedData.push(item.productId);\n        }\n      });\n      setWishlist(updatedData);\n      dispatch(commonActions.getUserStatus()); //get updated user data\n\n      return response.data;\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const removeFromWishlist = productId => {\n    axios({\n      method: \"patch\",\n      url: API_URL + \"/auth/user/wishlist\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"woodenculture-token\")\n      },\n      params: {\n        productId,\n        status: false\n      }\n    }).then(function (response) {\n      getWishlist();\n      return response.data;\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  console.log(\"test\", wishlist);\n  return /*#__PURE__*/_jsx(Layout, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"wishlist-page\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"product-list-strip\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"container\",\n          children: /*#__PURE__*/_jsx(\"div\", {\n            className: \"product-list\",\n            children: wishlist && wishlist.map(item => {\n              if (!item) return null;\n              return /*#__PURE__*/_jsx(ProductItem, {\n                item: item,\n                removeFromWishlist: removeFromWishlist,\n                wishlistPage: true\n              }, item._id);\n            })\n          })\n        })\n      })\n    })\n  });\n}\n\nexport default Wishlist;","map":null,"metadata":{},"sourceType":"module"}