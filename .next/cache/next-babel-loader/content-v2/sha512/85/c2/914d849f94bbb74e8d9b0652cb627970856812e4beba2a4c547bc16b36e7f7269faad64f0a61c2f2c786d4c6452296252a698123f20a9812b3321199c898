{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect, useRef } from \"react\";\nimport axios from \"axios\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\nimport { connect } from \"react-redux\";\nimport { commonApis, commonActions } from \"../../store-thunk/common\";\nimport { API_URL } from \"../../config\";\n\nfunction Login(props) {\n  var _props$signupData2, _props$signupData2$da, _props$userData2, _props$userData2$data, _props$userData4;\n\n  const myProfileRef = useRef(null);\n  const {\n    0: show,\n    1: setShow\n  } = useState(false);\n  const {\n    0: isUserLogedin,\n    1: showIsUserLogedin\n  } = useState(false);\n  const {\n    0: shouldShowLoginForm,\n    1: setShouldShowLoginForm\n  } = useState(true);\n  const {\n    0: formDataLogin,\n    1: setFormData\n  } = useState({\n    phone_num: \"\",\n    password: \"\"\n  });\n  const {\n    0: signUpFormData,\n    1: setSignUpFormData\n  } = useState({\n    phone_num: \"\",\n    password: \"\",\n    name: \"\"\n  });\n\n  const handleClose = () => {\n    props.setLoginModel(false);\n  };\n\n  const handleChangeLogin = (key, e) => {\n    const updatedFormData = _objectSpread({}, formDataLogin);\n\n    updatedFormData[key] = e.target.value;\n    setFormData(updatedFormData);\n  };\n\n  const handleChangeSignup = (key, e) => {\n    const updatedSignUpFormData = _objectSpread({}, signUpFormData);\n\n    updatedSignUpFormData[key] = e.target.value;\n    setSignUpFormData(updatedSignUpFormData);\n  };\n\n  const handleSubmitLogin = e => {\n    e.preventDefault();\n    props.login({\n      phone_num: formDataLogin.phone_num,\n      password: formDataLogin.password\n    });\n  };\n\n  const handleSubmitSignup = e => {\n    e.preventDefault();\n    axios({\n      method: \"put\",\n      url: API_URL + \"/auth/signup\",\n      data: {\n        phone_num: signUpFormData.phone_num,\n        password: signUpFormData.password,\n        name: signUpFormData.name\n      }\n    }).then(function (response) {\n      setShouldShowLoginForm(true);\n    }).catch(function (error) {\n      return {\n        status: false\n      };\n    });\n  };\n\n  useEffect(() => {\n    var _props$signupData, _props$signupData$dat;\n\n    if ((_props$signupData = props.signupData) !== null && _props$signupData !== void 0 && (_props$signupData$dat = _props$signupData.data) !== null && _props$signupData$dat !== void 0 && _props$signupData$dat.status) {\n      setShouldShowLoginForm(true);\n    }\n  }, [(_props$signupData2 = props.signupData) === null || _props$signupData2 === void 0 ? void 0 : (_props$signupData2$da = _props$signupData2.data) === null || _props$signupData2$da === void 0 ? void 0 : _props$signupData2$da.status]);\n  useEffect(() => {\n    var _props$userData, _props$userData$data;\n\n    if ((_props$userData = props.userData) !== null && _props$userData !== void 0 && (_props$userData$data = _props$userData.data) !== null && _props$userData$data !== void 0 && _props$userData$data.userId) {\n      showIsUserLogedin(true);\n      setShow(false);\n    }\n  }, [(_props$userData2 = props.userData) === null || _props$userData2 === void 0 ? void 0 : (_props$userData2$data = _props$userData2.data) === null || _props$userData2$data === void 0 ? void 0 : _props$userData2$data.userId]);\n  useEffect(() => {\n    var _props$userData3;\n\n    if (!((_props$userData3 = props.userData) !== null && _props$userData3 !== void 0 && _props$userData3.loading)) {\n      handleClose();\n    }\n  }, [(_props$userData4 = props.userData) === null || _props$userData4 === void 0 ? void 0 : _props$userData4.loading]);\n\n  const handleClickOutside = event => {\n    if (myProfileRef.current && !myProfileRef.current.contains(event.target)) {\n      document.querySelectorAll(\".sub-dropdown\").forEach(node => {\n        node.style.display = \"none\";\n      });\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"click\", handleClickOutside, true);\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside, true);\n    };\n  }, []);\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: \"secondary-strip\",\n    children: /*#__PURE__*/_jsx(Modal, {\n      show: props.loginModel,\n      onHide: handleClose,\n      className: \"login-modal\",\n      children: /*#__PURE__*/_jsx(Modal.Body, {\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"login-wrapper\",\n          children: [/*#__PURE__*/_jsxs(\"div\", {\n            className: \"sec-1\",\n            children: [/*#__PURE__*/_jsx(\"h2\", {\n              children: \"Login\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              children: \"Get access to your Wishlist, Recommendations and Orders\"\n            })]\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"sec-2\",\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"form-body\",\n              children: shouldShowLoginForm ? /*#__PURE__*/_jsxs(Form, {\n                onSubmit: handleSubmitLogin,\n                children: [/*#__PURE__*/_jsxs(Form.Group, {\n                  controlId: \"formBasicEmail\",\n                  children: [/*#__PURE__*/_jsx(Form.Label, {\n                    children: \"Mobile Number\"\n                  }), /*#__PURE__*/_jsx(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Enter mobile number\",\n                    onChange: e => {\n                      handleChangeLogin(\"phone_num\", e);\n                    },\n                    value: formDataLogin.phone_num\n                  })]\n                }), /*#__PURE__*/_jsxs(Form.Group, {\n                  controlId: \"formBasicPassword\",\n                  children: [/*#__PURE__*/_jsx(Form.Label, {\n                    children: \"Password\"\n                  }), /*#__PURE__*/_jsx(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Password\",\n                    onChange: e => {\n                      handleChangeLogin(\"password\", e);\n                    },\n                    value: formDataLogin.password\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"button-grp\",\n                  children: [/*#__PURE__*/_jsx(Button, {\n                    onClick: () => {\n                      setShouldShowLoginForm(!shouldShowLoginForm);\n                    },\n                    variant: \"outline-primary\",\n                    type: \"button\",\n                    children: \"Create account\"\n                  }), /*#__PURE__*/_jsx(Button, {\n                    variant: \"primary\",\n                    type: \"submit\",\n                    children: \"Submit\"\n                  })]\n                })]\n              }) : /*#__PURE__*/_jsxs(Form, {\n                onSubmit: handleSubmitSignup,\n                children: [/*#__PURE__*/_jsxs(Form.Group, {\n                  controlId: \"formBasicEmail\",\n                  children: [/*#__PURE__*/_jsx(Form.Label, {\n                    children: \"Name\"\n                  }), /*#__PURE__*/_jsx(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Enter Name\",\n                    onChange: e => {\n                      handleChangeSignup(\"name\", e);\n                    },\n                    value: signUpFormData.name\n                  })]\n                }), /*#__PURE__*/_jsxs(Form.Group, {\n                  controlId: \"formBasicEmail\",\n                  children: [/*#__PURE__*/_jsx(Form.Label, {\n                    children: \"Mobile Number\"\n                  }), /*#__PURE__*/_jsx(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Enter mobile number\",\n                    onChange: e => {\n                      handleChangeSignup(\"phone_num\", e);\n                    },\n                    value: signUpFormData.phone_num\n                  })]\n                }), /*#__PURE__*/_jsxs(Form.Group, {\n                  controlId: \"formBasicPassword\",\n                  children: [/*#__PURE__*/_jsx(Form.Label, {\n                    children: \"Password\"\n                  }), /*#__PURE__*/_jsx(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"Password\",\n                    onChange: e => {\n                      handleChangeSignup(\"password\", e);\n                    },\n                    value: signUpFormData.password\n                  })]\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  className: \"button-grp\",\n                  children: [/*#__PURE__*/_jsx(Button, {\n                    onClick: () => {\n                      setShouldShowLoginForm(!shouldShowLoginForm);\n                    },\n                    variant: \"outline-primary\",\n                    type: \"button\",\n                    children: \"Login\"\n                  }), /*#__PURE__*/_jsx(Button, {\n                    variant: \"primary\",\n                    type: \"submit\",\n                    children: \"Submit\"\n                  })]\n                })]\n              })\n            })\n          })]\n        })\n      })\n    })\n  });\n}\n\nconst mapStateToProps = state => {\n  return {\n    signupData: state.common.signup,\n    userData: state.common.user,\n    loginModel: state.common.duck.loginModel\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  const {\n    login,\n    signup\n  } = commonApis;\n  const {\n    setLoginModel\n  } = commonActions;\n  return {\n    login: payload => dispatch(login(payload)),\n    signup: payload => dispatch(signup(payload)),\n    setLoginModel: payload => dispatch(setLoginModel(payload))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":null,"metadata":{},"sourceType":"module"}