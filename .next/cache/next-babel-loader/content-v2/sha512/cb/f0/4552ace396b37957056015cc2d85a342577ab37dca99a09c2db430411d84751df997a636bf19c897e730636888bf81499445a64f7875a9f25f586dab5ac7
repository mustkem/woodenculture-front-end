{"ast":null,"code":"import _regeneratorRuntime from \"/home/mustkeem/Documents/My Projects/all-projects/woodenculture/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mustkeem/Documents/My Projects/all-projects/woodenculture/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { API_URL } from \"../../config\";\nimport axios from \"axios\";\nimport { loginSucess, login as loginInitiate } from \"./actions\";\nexport var login = function login(payload) {\n  return function (dispatch) {\n    dispatch(loginInitiate({\n      loading: true\n    }));\n    return axios({\n      method: \"post\",\n      url: API_URL + \"/auth/login\",\n      data: payload\n    }).then(function (response) {\n      localStorage.setItem(\"woodenculture-token\", response.data.token);\n      var data = response.data;\n      data.isLogedin = true;\n      dispatch(loginSucess(data));\n      return data;\n    })[\"catch\"](function (error) {\n      console.log(error);\n      return {\n        isLogedin: false\n      };\n    });\n  };\n};\nexport var signup = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(payload) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", axios({\n              method: \"put\",\n              url: API_URL + \"/auth/signup\",\n              data: payload\n            }).then(function (response) {\n              return {\n                status: true\n              };\n            })[\"catch\"](function (error) {\n              return {\n                status: false\n              };\n            }));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function signup(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getUserStatus = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(payload) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", axios({\n              method: \"get\",\n              url: API_URL + \"/auth/status\",\n              headers: {\n                Authorization: \"Bearer \" + localStorage.getItem(\"woodenculture-token\")\n              }\n            }).then(function (response) {\n              var data = response.data;\n              data.isLogedin = true;\n              return data;\n            })[\"catch\"](function (error) {\n              return {\n                isLogedin: false\n              };\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function getUserStatus(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/home/mustkeem/Documents/My Projects/all-projects/woodenculture/frontend/store-thunk/common/api.js"],"names":["API_URL","axios","loginSucess","login","loginInitiate","payload","dispatch","loading","method","url","data","then","response","localStorage","setItem","token","isLogedin","error","console","log","signup","status","getUserStatus","headers","Authorization","getItem"],"mappings":";;AAAA,SAASA,OAAT,QAAwB,cAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,EAAsBC,KAAK,IAAIC,aAA/B,QAAoD,WAApD;AAEA,OAAO,IAAMD,KAAK,GAAG,SAARA,KAAQ,CAACE,OAAD;AAAA,SAAa,UAACC,QAAD,EAAc;AAC9CA,IAAAA,QAAQ,CACNF,aAAa,CAAC;AACZG,MAAAA,OAAO,EAAE;AADG,KAAD,CADP,CAAR;AAKA,WAAON,KAAK,CAAC;AACXO,MAAAA,MAAM,EAAE,MADG;AAEXC,MAAAA,GAAG,EAAET,OAAO,GAAG,aAFJ;AAGXU,MAAAA,IAAI,EAAEL;AAHK,KAAD,CAAL,CAKJM,IALI,CAKC,UAAUC,QAAV,EAAoB;AACxBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,qBAArB,EAA4CF,QAAQ,CAACF,IAAT,CAAcK,KAA1D;AACA,UAAML,IAAI,GAAGE,QAAQ,CAACF,IAAtB;AACAA,MAAAA,IAAI,CAACM,SAAL,GAAiB,IAAjB;AACAV,MAAAA,QAAQ,CAACJ,WAAW,CAACQ,IAAD,CAAZ,CAAR;AACA,aAAOA,IAAP;AACD,KAXI,WAYE,UAAUO,KAAV,EAAiB;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,aAAO;AAAED,QAAAA,SAAS,EAAE;AAAb,OAAP;AACD,KAfI,CAAP;AAgBD,GAtBoB;AAAA,CAAd;AAwBP,OAAO,IAAMI,MAAM;AAAA,sEAAG,iBAAOf,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA,6CACbJ,KAAK,CAAC;AACXO,cAAAA,MAAM,EAAE,KADG;AAEXC,cAAAA,GAAG,EAAET,OAAO,GAAG,cAFJ;AAGXU,cAAAA,IAAI,EAAEL;AAHK,aAAD,CAAL,CAKJM,IALI,CAKC,UAAUC,QAAV,EAAoB;AACxB,qBAAO;AAAES,gBAAAA,MAAM,EAAE;AAAV,eAAP;AACD,aAPI,WAQE,UAAUJ,KAAV,EAAiB;AACtB,qBAAO;AAAEI,gBAAAA,MAAM,EAAE;AAAV,eAAP;AACD,aAVI,CADa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAND,MAAM;AAAA;AAAA;AAAA,GAAZ;AAcP,OAAO,IAAME,aAAa;AAAA,uEAAG,kBAAOjB,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA,8CACpBJ,KAAK,CAAC;AACXO,cAAAA,MAAM,EAAE,KADG;AAEXC,cAAAA,GAAG,EAAET,OAAO,GAAG,cAFJ;AAGXuB,cAAAA,OAAO,EAAE;AACPC,gBAAAA,aAAa,EAAE,YAAYX,YAAY,CAACY,OAAb,CAAqB,qBAArB;AADpB;AAHE,aAAD,CAAL,CAOJd,IAPI,CAOC,UAAUC,QAAV,EAAoB;AACxB,kBAAMF,IAAI,GAAGE,QAAQ,CAACF,IAAtB;AACAA,cAAAA,IAAI,CAACM,SAAL,GAAiB,IAAjB;AACA,qBAAON,IAAP;AACD,aAXI,WAYE,UAAUO,KAAV,EAAiB;AACtB,qBAAO;AAAED,gBAAAA,SAAS,EAAE;AAAb,eAAP;AACD,aAdI,CADoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAbM,aAAa;AAAA;AAAA;AAAA,GAAnB","sourcesContent":["import { API_URL } from \"../../config\";\r\nimport axios from \"axios\";\r\nimport { loginSucess, login as loginInitiate } from \"./actions\";\r\n\r\nexport const login = (payload) => (dispatch) => {\r\n  dispatch(\r\n    loginInitiate({\r\n      loading: true,\r\n    })\r\n  );\r\n  return axios({\r\n    method: \"post\",\r\n    url: API_URL + \"/auth/login\",\r\n    data: payload,\r\n  })\r\n    .then(function (response) {\r\n      localStorage.setItem(\"woodenculture-token\", response.data.token);\r\n      const data = response.data;\r\n      data.isLogedin = true;\r\n      dispatch(loginSucess(data));\r\n      return data;\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n      return { isLogedin: false };\r\n    });\r\n};\r\n\r\nexport const signup = async (payload) => {\r\n  return axios({\r\n    method: \"put\",\r\n    url: API_URL + \"/auth/signup\",\r\n    data: payload,\r\n  })\r\n    .then(function (response) {\r\n      return { status: true };\r\n    })\r\n    .catch(function (error) {\r\n      return { status: false };\r\n    });\r\n};\r\n\r\nexport const getUserStatus = async (payload) => {\r\n  return axios({\r\n    method: \"get\",\r\n    url: API_URL + \"/auth/status\",\r\n    headers: {\r\n      Authorization: \"Bearer \" + localStorage.getItem(\"woodenculture-token\"),\r\n    },\r\n  })\r\n    .then(function (response) {\r\n      const data = response.data;\r\n      data.isLogedin = true;\r\n      return data;\r\n    })\r\n    .catch(function (error) {\r\n      return { isLogedin: false };\r\n    });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}