{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _defineProperty from \"/home/mustkeem/Documents/My Projects/all-projects/woodenculture/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/home/mustkeem/Documents/My Projects/all-projects/woodenculture/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from \"react\";\nimport { Button, Modal, Form } from \"react-bootstrap\";\nimport { BsTagFill } from \"react-icons/bs\";\nimport Slider from \"react-slick\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { commonActions } from \"../../../../store/common\";\nimport { API_URL } from \"../../../../config\";\nimport QueryModel from \"../../../Common/QueryModel\";\nvar settings = {\n  dots: true,\n  infinite: true,\n  speed: 500,\n  slidesToShow: 1,\n  slidesToScroll: 1\n};\nvar settingProduct = {\n  dots: false,\n  infinite: true,\n  speed: 500,\n  slidesToShow: 1,\n  slidesToScroll: 1\n};\n\nfunction ProductItem(props) {\n  var dispatch = useDispatch();\n  var isLogedIn = useSelector(function (state) {\n    var _state$common$user$da;\n\n    return (_state$common$user$da = state.common.user.data) === null || _state$common$user$da === void 0 ? void 0 : _state$common$user$da.isLogedin;\n  });\n  var item = props.item,\n      user = props.user,\n      getProducts = props.getProducts;\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      nav1 = _React$useState2[0],\n      setNav1 = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      nav2 = _React$useState4[0],\n      setNav2 = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      bookNowModel = _React$useState6[0],\n      setBookNowModel = _React$useState6[1];\n\n  var _useState = useState(false),\n      show = _useState[0],\n      setShow = _useState[1];\n\n  var handleClose = function handleClose() {\n    return setShow(false);\n  };\n\n  var handleShow = function handleShow() {\n    return setShow(true);\n  };\n\n  var slider1 = null;\n  var slider2 = null;\n  React.useEffect(function () {\n    setNav1(slider1);\n    setNav2(slider2);\n  }, []);\n\n  var handleAddWishlist = function handleAddWishlist(productId, status) {\n    axios({\n      method: \"patch\",\n      url: API_URL + \"/auth/user/wishlist\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"woodenculture-token\")\n      },\n      params: {\n        productId: productId,\n        status: status\n      }\n    }).then(function (response) {\n      // getProducts();\n      dispatch(commonActions.getUserStatus()); ///get updated user data\n\n      handleShow();\n      return response.data;\n    })[\"catch\"](function (error) {\n      console.log(error);\n    });\n  };\n\n  var isAddedToWishlist = function isAddedToWishlist(productId) {\n    var flag = false;\n    user && user.wishlist && user.wishlist.forEach(function (item) {\n      if (item.productId === productId && item.status) {\n        flag = true;\n      }\n    });\n    return flag;\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"row product-item\",\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: \"col-6 sec-1\",\n      children: [/*#__PURE__*/_jsx(Slider, _objectSpread(_objectSpread({}, settingProduct), {}, {\n        asNavFor: nav2,\n        ref: function ref(slider) {\n          return slider1 = slider;\n        },\n        children: item.images && item.images.map(function (item) {\n          return /*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"poster\",\n              children: /*#__PURE__*/_jsx(\"img\", {\n                className: \"image\",\n                src: \"https://woodenculture-backend.herokuapp.com/\" + item.url,\n                alt: \"\"\n              })\n            })\n          });\n        })\n      })), /*#__PURE__*/_jsx(\"div\", {\n        className: \"product-thumbs\",\n        children: /*#__PURE__*/_jsx(Slider, _objectSpread(_objectSpread({}, settings), {}, {\n          slidesToShow: (item === null || item === void 0 ? void 0 : item.images.length) < 6 ? item === null || item === void 0 ? void 0 : item.images.length : 6,\n          asNavFor: nav1,\n          ref: function ref(slider) {\n            return slider2 = slider;\n          },\n          focusOnSelect: true,\n          children: item === null || item === void 0 ? void 0 : item.images.map(function (item) {\n            return /*#__PURE__*/_jsx(\"div\", {\n              className: \"thumb-item\",\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"thumb-content\",\n                children: /*#__PURE__*/_jsx(\"img\", {\n                  className: \"image\",\n                  src: \"https://woodenculture-backend.herokuapp.com/\" + item.url,\n                  alt: \"\"\n                })\n              })\n            });\n          })\n        }))\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"col-6\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"head-sec\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"title\",\n          children: item === null || item === void 0 ? void 0 : item.title\n        })\n      }), /*#__PURE__*/_jsx(\"p\", {\n        className: \"description\",\n        children: item === null || item === void 0 ? void 0 : item.description\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"actions-product\",\n        children: [props.wishlistPage ? /*#__PURE__*/_jsx(\"button\", {\n          onClick: function onClick() {\n            props.removeFromWishlist(item._id);\n          },\n          className: \"bt-main left\",\n          children: \"Remove from wishlist\"\n        }) : /*#__PURE__*/_jsx(_Fragment, {\n          children: isAddedToWishlist(item._id) ? /*#__PURE__*/_jsx(\"button\", {\n            onClick: function onClick() {\n              if (!isLogedIn) {\n                dispatch(commonActions.setLoginModel(true));\n                return false;\n              }\n\n              handleAddWishlist(item._id, false);\n            },\n            className: \"bt-main left\",\n            children: \"Added to wishlist\"\n          }) : /*#__PURE__*/_jsx(\"button\", {\n            onClick: function onClick() {\n              if (!isLogedIn) {\n                dispatch(commonActions.setLoginModel(true));\n                return false;\n              }\n\n              handleAddWishlist(item._id, true);\n            },\n            className: \"bt-main left\",\n            children: \"Add to wishlist\"\n          })\n        }), /*#__PURE__*/_jsx(\"button\", {\n          onClick: function onClick() {\n            setBookNowModel(true);\n          },\n          className: \"bt-main right\",\n          children: \"Book now\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"features\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"title-small\",\n          children: \"Features\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"details\",\n          children: item === null || item === void 0 ? void 0 : item.features.map(function (item) {\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: \"features-row\",\n              children: [/*#__PURE__*/_jsx(BsTagFill, {\n                className: \"icon\"\n              }), /*#__PURE__*/_jsx(\"strong\", {\n                children: item.title\n              }), /*#__PURE__*/_jsx(\"span\", {\n                children: item.desc\n              })]\n            });\n          })\n        })]\n      })]\n    }), /*#__PURE__*/_jsxs(Modal, {\n      show: show,\n      onHide: handleClose,\n      children: [/*#__PURE__*/_jsx(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsx(Modal.Title, {\n          children: item === null || item === void 0 ? void 0 : item.title\n        })\n      }), /*#__PURE__*/_jsx(Modal.Body, {\n        children: isAddedToWishlist(item._id) ? \"Added to wishlist\" : \"Removed from wishlist\"\n      }), /*#__PURE__*/_jsx(Modal.Footer, {\n        children: /*#__PURE__*/_jsx(Button, {\n          variant: \"secondary\",\n          onClick: handleClose,\n          children: \"Close\"\n        })\n      })]\n    }), /*#__PURE__*/_jsx(QueryModel, {\n      show: bookNowModel,\n      setShow: setBookNowModel,\n      item: item,\n      type: \"Product query\"\n    })]\n  });\n}\n\nexport default ProductItem;","map":null,"metadata":{},"sourceType":"module"}