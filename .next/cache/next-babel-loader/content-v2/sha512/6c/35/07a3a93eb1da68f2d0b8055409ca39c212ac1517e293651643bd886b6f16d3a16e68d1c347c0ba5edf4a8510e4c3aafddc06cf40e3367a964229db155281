{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from \"react\";\nimport { Button, Modal, Form } from \"react-bootstrap\";\nimport { BsTagFill } from \"react-icons/bs\";\nimport Slider from \"react-slick\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport { commonActions, commonApis } from \"../../../../store-thunk/common\";\nimport { productsApis } from \"../../../../store-thunk/products\";\nimport { API_URL } from \"../../../../config\";\nimport QueryModel from \"../../../Common/QueryModel\";\nvar settings = {\n  dots: true,\n  infinite: true,\n  speed: 500,\n  slidesToShow: 1,\n  slidesToScroll: 1\n};\nvar settingProduct = {\n  dots: false,\n  infinite: true,\n  speed: 500,\n  slidesToShow: 1,\n  slidesToScroll: 1\n};\n\nfunction ProductItem(props) {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  console.log(\"testrrrrr eoyter\", router.query);\n  const isLogedIn = useSelector(state => {\n    var _state$common$user$da;\n\n    return (_state$common$user$da = state.common.user.data) === null || _state$common$user$da === void 0 ? void 0 : _state$common$user$da.isLogedin;\n  });\n  const {\n    item,\n    user\n  } = props;\n  const [nav1, setNav1] = React.useState(null);\n  const [nav2, setNav2] = React.useState(null);\n  const [bookNowModel, setBookNowModel] = React.useState(false);\n  const {\n    0: show,\n    1: setShow\n  } = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  let slider1 = null;\n  let slider2 = null;\n  React.useEffect(() => {\n    setNav1(slider1);\n    setNav2(slider2);\n  }, []);\n\n  const handleAddWishlist = (productId, status) => {\n    axios({\n      method: \"patch\",\n      url: API_URL + \"/auth/user/wishlist\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"woodenculture-token\")\n      },\n      params: {\n        productId,\n        status\n      }\n    }).then(function (response) {\n      dispatch(productsApis.fetchProducts({\n        category_slug: router.query.tag\n      }));\n      dispatch(commonApis.getUserStatus()); ///get updated user data\n\n      handleShow();\n      return response.data;\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const isAddedToWishlist = productId => {\n    let flag = false;\n    user && user.wishlist && user.wishlist.forEach(item => {\n      if (item.productId === productId && item.status) {\n        flag = true;\n      }\n    });\n    return flag;\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"row product-item\",\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"col-6 sec-1\",\n      children: /*#__PURE__*/_jsx(Slider, _objectSpread(_objectSpread({}, settingProduct), {}, {\n        asNavFor: nav2,\n        ref: slider => slider1 = slider,\n        children: item.images && item.images.map(item => {\n          return /*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(\"div\", {\n              className: \"poster\",\n              children: /*#__PURE__*/_jsx(\"img\", {\n                className: \"image\",\n                src: \"https://woodenculture-backend.herokuapp.com/\" + item.url,\n                alt: \"\"\n              })\n            })\n          });\n        })\n      }))\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"col-6\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: \"head-sec\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"title\",\n          children: item === null || item === void 0 ? void 0 : item.title\n        })\n      }), /*#__PURE__*/_jsx(\"p\", {\n        className: \"description\",\n        children: item === null || item === void 0 ? void 0 : item.description\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"actions-product\",\n        children: [props.wishlistPage ? /*#__PURE__*/_jsx(\"button\", {\n          onClick: () => {\n            props.removeFromWishlist(item._id);\n          },\n          className: \"bt-main left\",\n          children: \"Remove from wishlist\"\n        }) : /*#__PURE__*/_jsx(_Fragment, {\n          children: isAddedToWishlist(item._id) ? /*#__PURE__*/_jsx(\"button\", {\n            onClick: () => {\n              if (!isLogedIn) {\n                dispatch(commonActions.setLoginModel(true));\n                return false;\n              }\n\n              handleAddWishlist(item._id, false);\n            },\n            className: \"bt-main left\",\n            children: \"Added to wishlist\"\n          }) : /*#__PURE__*/_jsx(\"button\", {\n            onClick: () => {\n              if (!isLogedIn) {\n                dispatch(commonActions.setLoginModel(true));\n                return false;\n              }\n\n              handleAddWishlist(item._id, true);\n            },\n            className: \"bt-main left\",\n            children: \"Add to wishlist\"\n          })\n        }), /*#__PURE__*/_jsx(\"button\", {\n          onClick: () => {\n            setBookNowModel(true);\n          },\n          className: \"bt-main right\",\n          children: \"Book now\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: \"features\",\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: \"title-small\",\n          children: \"Features\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"details\",\n          children: item === null || item === void 0 ? void 0 : item.features.map(item => {\n            return /*#__PURE__*/_jsxs(\"div\", {\n              className: \"features-row\",\n              children: [/*#__PURE__*/_jsx(BsTagFill, {\n                className: \"icon\"\n              }), /*#__PURE__*/_jsx(\"strong\", {\n                children: item.title\n              }), /*#__PURE__*/_jsx(\"span\", {\n                children: item.desc\n              })]\n            });\n          })\n        })]\n      })]\n    }), /*#__PURE__*/_jsxs(Modal, {\n      show: show,\n      onHide: handleClose,\n      children: [/*#__PURE__*/_jsx(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsx(Modal.Title, {\n          children: item === null || item === void 0 ? void 0 : item.title\n        })\n      }), /*#__PURE__*/_jsx(Modal.Body, {\n        children: isAddedToWishlist(item._id) ? \"Added to wishlist\" : \"Removed from wishlist\"\n      }), /*#__PURE__*/_jsx(Modal.Footer, {\n        children: /*#__PURE__*/_jsx(Button, {\n          variant: \"secondary\",\n          onClick: handleClose,\n          children: \"Close\"\n        })\n      })]\n    }), /*#__PURE__*/_jsx(QueryModel, {\n      show: bookNowModel,\n      setShow: setBookNowModel,\n      item: item,\n      type: \"Product query\"\n    })]\n  });\n}\n\nexport default ProductItem;","map":null,"metadata":{},"sourceType":"module"}