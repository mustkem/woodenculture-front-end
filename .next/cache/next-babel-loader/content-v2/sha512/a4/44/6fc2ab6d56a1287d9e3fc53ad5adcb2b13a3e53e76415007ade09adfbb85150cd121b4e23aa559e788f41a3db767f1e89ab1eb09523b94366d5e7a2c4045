{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/home/mustkeem/Documents/My Projects/all-projects/woodenculture/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { commonActions } from \"../../store/common\";\nimport { API_URL } from \"../../config\";\nimport ProductItem from \"../ProductList/components/ProductItem\";\nimport Layout from \"../Layout\";\nimport NoRecordFound from \"../NoRecordFound\";\n\nfunction Wishlist() {\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      wishlist = _React$useState2[0],\n      setWishlist = _React$useState2[1];\n\n  var dispatch = useDispatch();\n  React.useEffect(function () {\n    getWishlist();\n  }, []);\n\n  var getWishlist = function getWishlist() {\n    axios({\n      method: \"get\",\n      url: API_URL + \"/auth/user/wishlist\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"woodenculture-token\")\n      }\n    }).then(function (response) {\n      var updatedData = [];\n      response.data.products.forEach(function (item) {\n        if (item.status && item.productId) {\n          updatedData.push(item.productId);\n        }\n      });\n      setWishlist(updatedData);\n      dispatch(commonActions.getUserStatus()); //get updated user data\n\n      return response.data;\n    })[\"catch\"](function (error) {\n      console.log(error);\n    });\n  };\n\n  var removeFromWishlist = function removeFromWishlist(productId) {\n    axios({\n      method: \"patch\",\n      url: API_URL + \"/auth/user/wishlist\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"woodenculture-token\")\n      },\n      params: {\n        productId: productId,\n        status: false\n      }\n    }).then(function (response) {\n      getWishlist();\n      return response.data;\n    })[\"catch\"](function (error) {\n      console.log(error);\n    });\n  };\n\n  console.log(\"test\", wishlist);\n  return /*#__PURE__*/_jsx(Layout, {\n    children: /*#__PURE__*/_jsx(\"div\", {\n      className: \"wishlist-page\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"product-list-strip\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: \"product-list\",\n            children: wishlist && wishlist.length > 0 && wishlist.map(function (item) {\n              if (!item) return null;\n              return /*#__PURE__*/_jsx(ProductItem, {\n                item: item,\n                removeFromWishlist: removeFromWishlist,\n                wishlistPage: true\n              }, item._id);\n            })\n          }), wishlist && wishlist.length === 0 && /*#__PURE__*/_jsx(NoRecordFound, {})]\n        })\n      })\n    })\n  });\n}\n\nexport default Wishlist;","map":null,"metadata":{},"sourceType":"module"}