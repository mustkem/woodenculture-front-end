{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\woodenculture\\\\woodenculture-front-end\\\\Components\\\\ProductList\\\\components\\\\ProductItem\\\\ProductItem.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from \"react\";\nimport { Button, Modal, Form } from \"react-bootstrap\";\nimport { BsTagFill } from \"react-icons/bs\";\nimport Slider from \"react-slick\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useRouter } from \"next/router\";\nimport { commonActions, commonApis } from \"../../../../store-thunk/common\";\nimport { productsApis } from \"../../../../store-thunk/products\";\nimport { API_URL } from \"../../../../config\";\nimport QueryModel from \"../../../Common/QueryModel\";\nvar settings = {\n  dots: true,\n  infinite: true,\n  speed: 500,\n  slidesToShow: 1,\n  slidesToScroll: 1\n};\nvar settingProduct = {\n  dots: false,\n  infinite: true,\n  speed: 500,\n  slidesToShow: 1,\n  slidesToScroll: 1\n};\n\nfunction ProductItem(props) {\n  const dispatch = useDispatch();\n  const router = useRouter();\n  console.log(\"testrrrrr eoyter\", router.query);\n  const isLogedIn = useSelector(state => {\n    var _state$common$user$da;\n\n    return (_state$common$user$da = state.common.user.data) === null || _state$common$user$da === void 0 ? void 0 : _state$common$user$da.isLogedin;\n  });\n  const {\n    item,\n    user\n  } = props;\n  const [nav1, setNav1] = React.useState(null);\n  const [nav2, setNav2] = React.useState(null);\n  const [bookNowModel, setBookNowModel] = React.useState(false);\n  const {\n    0: show,\n    1: setShow\n  } = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  let slider1 = null;\n  let slider2 = null;\n  React.useEffect(() => {\n    setNav1(slider1);\n    setNav2(slider2);\n  }, []);\n\n  const handleAddWishlist = (productId, status) => {\n    axios({\n      method: \"patch\",\n      url: API_URL + \"/auth/user/wishlist\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"woodenculture-token\")\n      },\n      params: {\n        productId,\n        status\n      }\n    }).then(function (response) {\n      dispatch(productsApis.fetchProducts({\n        category_slug: router.query.tag\n      }));\n      dispatch(commonApis.getUserStatus()); ///get updated user data\n\n      handleShow();\n      return response.data;\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const isAddedToWishlist = productId => {\n    let flag = false;\n    user && user.wishlist && user.wishlist.forEach(item => {\n      if (item.productId === productId && item.status) {\n        flag = true;\n      }\n    });\n    return flag;\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row product-item\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12 col-sm-6 sec-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mobile-head-sec\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: item === null || item === void 0 ? void 0 : item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Slider, _objectSpread(_objectSpread({}, settingProduct), {}, {\n        asNavFor: nav2,\n        ref: slider => slider1 = slider,\n        children: item.images && item.images.map(item => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"poster\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"image\",\n                src: \"https://woodenculture-backend.herokuapp.com/\" + item.url,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }, this);\n        })\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12 col-sm-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"head-sec\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title\",\n          children: item === null || item === void 0 ? void 0 : item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"description\",\n        children: item === null || item === void 0 ? void 0 : item.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"actions-product\",\n        children: [props.wishlistPage ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            props.removeFromWishlist(item._id);\n          },\n          className: \"bt-main left\",\n          children: \"Remove from wishlist\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: isAddedToWishlist(item._id) ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              if (!isLogedIn) {\n                dispatch(commonActions.setLoginModel(true));\n                return false;\n              }\n\n              handleAddWishlist(item._id, false);\n            },\n            className: \"bt-main left\",\n            children: \"Added to wishlist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              if (!isLogedIn) {\n                dispatch(commonActions.setLoginModel(true));\n                return false;\n              }\n\n              handleAddWishlist(item._id, true);\n            },\n            className: \"bt-main left\",\n            children: \"Add to wishlist\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 21\n          }, this)\n        }, void 0, false), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setBookNowModel(true);\n          },\n          className: \"bt-main right\",\n          children: \"Book now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"features\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"title-small\",\n          children: \"Features\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"details\",\n          children: item === null || item === void 0 ? void 0 : item.features.map(item => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"features-row\",\n              children: [/*#__PURE__*/_jsxDEV(BsTagFill, {\n                className: \"icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: item.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: item.desc\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: show,\n      onHide: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: item === null || item === void 0 ? void 0 : item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: isAddedToWishlist(item._id) ? \"Added to wishlist\" : \"Removed from wishlist\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: handleClose,\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(QueryModel, {\n      show: bookNowModel,\n      setShow: setBookNowModel,\n      item: item,\n      type: \"Product query\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n\nexport default ProductItem;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/woodenculture/woodenculture-front-end/Components/ProductList/components/ProductItem/ProductItem.js"],"names":["React","useState","Button","Modal","Form","BsTagFill","Slider","axios","useSelector","useDispatch","useRouter","commonActions","commonApis","productsApis","API_URL","QueryModel","settings","dots","infinite","speed","slidesToShow","slidesToScroll","settingProduct","ProductItem","props","dispatch","router","console","log","query","isLogedIn","state","common","user","data","isLogedin","item","nav1","setNav1","nav2","setNav2","bookNowModel","setBookNowModel","show","setShow","handleClose","handleShow","slider1","slider2","useEffect","handleAddWishlist","productId","status","method","url","headers","Authorization","localStorage","getItem","params","then","response","fetchProducts","category_slug","tag","getUserStatus","catch","error","isAddedToWishlist","flag","wishlist","forEach","title","slider","images","map","description","wishlistPage","removeFromWishlist","_id","setLoginModel","features","desc"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { Button, Modal, Form } from \"react-bootstrap\";\r\nimport { BsTagFill } from \"react-icons/bs\";\r\nimport Slider from \"react-slick\";\r\nimport axios from \"axios\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useRouter } from \"next/router\";\r\n\r\nimport { commonActions, commonApis } from \"../../../../store-thunk/common\";\r\nimport { productsApis } from \"../../../../store-thunk/products\";\r\n\r\nimport { API_URL } from \"../../../../config\";\r\n\r\nimport QueryModel from \"../../../Common/QueryModel\";\r\n\r\nvar settings = {\r\n  dots: true,\r\n  infinite: true,\r\n  speed: 500,\r\n  slidesToShow: 1,\r\n  slidesToScroll: 1,\r\n};\r\n\r\nvar settingProduct = {\r\n  dots: false,\r\n  infinite: true,\r\n  speed: 500,\r\n  slidesToShow: 1,\r\n  slidesToScroll: 1,\r\n};\r\n\r\nfunction ProductItem(props) {\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n\r\n  console.log(\"testrrrrr eoyter\", router.query);\r\n  const isLogedIn = useSelector((state) => {\r\n    return state.common.user.data?.isLogedin;\r\n  });\r\n\r\n  const { item, user } = props;\r\n  const [nav1, setNav1] = React.useState(null);\r\n  const [nav2, setNav2] = React.useState(null);\r\n  const [bookNowModel, setBookNowModel] = React.useState(false);\r\n\r\n  const [show, setShow] = useState(false);\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  let slider1 = null;\r\n  let slider2 = null;\r\n\r\n  React.useEffect(() => {\r\n    setNav1(slider1);\r\n    setNav2(slider2);\r\n  }, []);\r\n\r\n  const handleAddWishlist = (productId, status) => {\r\n    axios({\r\n      method: \"patch\",\r\n      url: API_URL + \"/auth/user/wishlist\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"woodenculture-token\"),\r\n      },\r\n      params: {\r\n        productId,\r\n        status,\r\n      },\r\n    })\r\n      .then(function (response) {\r\n        dispatch(productsApis.fetchProducts({ category_slug: router.query.tag }));\r\n        dispatch(commonApis.getUserStatus()); ///get updated user data\r\n        handleShow();\r\n        return response.data;\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  const isAddedToWishlist = (productId) => {\r\n    let flag = false;\r\n    user &&\r\n      user.wishlist &&\r\n      user.wishlist.forEach((item) => {\r\n        if (item.productId === productId && item.status) {\r\n          flag = true;\r\n        }\r\n      });\r\n    return flag;\r\n  };\r\n\r\n  return (\r\n    <div className=\"row product-item\">\r\n\r\n      <div className=\"col-12 col-sm-6 sec-1\">\r\n        <div className=\"mobile-head-sec\">\r\n          <div className=\"title\">{item?.title}</div>\r\n        </div>\r\n        <Slider {...settingProduct} asNavFor={nav2} ref={(slider) => (slider1 = slider)}>\r\n          {item.images &&\r\n            item.images.map((item) => {\r\n              return (\r\n                <div>\r\n                  <div className=\"poster\">\r\n                    <img\r\n                      className=\"image\"\r\n                      src={\"https://woodenculture-backend.herokuapp.com/\" + item.url}\r\n                      alt=\"\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n        </Slider>\r\n        {/* <div className=\"product-thumbs\">\r\n          <Slider\r\n            {...settings}\r\n            slidesToShow={item?.images.length < 6 ? item?.images.length : 6}\r\n            asNavFor={nav1}\r\n            ref={(slider) => (slider2 = slider)}\r\n            focusOnSelect={true}\r\n          >\r\n            {item?.images.map((item) => {\r\n              return (\r\n                <div className=\"thumb-item\">\r\n                  <div className=\"thumb-content\">\r\n                    <img\r\n                      className=\"image\"\r\n                      src={\"https://woodenculture-backend.herokuapp.com/\" + item.url}\r\n                      alt=\"\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </Slider>\r\n        </div> */}\r\n      </div>\r\n      <div className=\"col-12 col-sm-6\">\r\n        <div className=\"head-sec\">\r\n          <div className=\"title\">{item?.title}</div>\r\n        </div>\r\n        <p className=\"description\">{item?.description}</p>\r\n        <div className=\"actions-product\">\r\n          {props.wishlistPage ? (\r\n            <button\r\n              onClick={() => {\r\n                props.removeFromWishlist(item._id);\r\n              }}\r\n              className=\"bt-main left\"\r\n            >\r\n              Remove from wishlist\r\n            </button>\r\n          ) : (\r\n              <>\r\n                {isAddedToWishlist(item._id) ? (\r\n                  <button\r\n                    onClick={() => {\r\n                      if (!isLogedIn) {\r\n                        dispatch(commonActions.setLoginModel(true));\r\n                        return false;\r\n                      }\r\n                      handleAddWishlist(item._id, false);\r\n                    }}\r\n                    className=\"bt-main left\"\r\n                  >\r\n                    Added to wishlist\r\n                  </button>\r\n                ) : (\r\n                    <button\r\n                      onClick={() => {\r\n                        if (!isLogedIn) {\r\n                          dispatch(commonActions.setLoginModel(true));\r\n                          return false;\r\n                        }\r\n                        handleAddWishlist(item._id, true);\r\n                      }}\r\n                      className=\"bt-main left\"\r\n                    >\r\n                      Add to wishlist\r\n                    </button>\r\n                  )}\r\n              </>\r\n            )}\r\n\r\n          <button\r\n            onClick={() => {\r\n              setBookNowModel(true);\r\n            }}\r\n            className=\"bt-main right\"\r\n          >\r\n            Book now\r\n          </button>\r\n        </div>\r\n        <div className=\"features\">\r\n          <div className=\"title-small\">Features</div>\r\n          <div className=\"details\">\r\n            {item?.features.map((item) => {\r\n              return (\r\n                <div className=\"features-row\">\r\n                  <BsTagFill className=\"icon\" />\r\n                  <strong>{item.title}</strong>\r\n                  <span>{item.desc}</span>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <Modal show={show} onHide={handleClose}>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>{item?.title}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          {isAddedToWishlist(item._id) ? \"Added to wishlist\" : \"Removed from wishlist\"}\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      <QueryModel show={bookNowModel} setShow={setBookNowModel} item={item} type=\"Product query\" />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductItem;\r\n"]},"metadata":{},"sourceType":"module"}