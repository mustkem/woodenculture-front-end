{"ast":null,"code":"import _regeneratorRuntime from \"/home/mustkeem/Documents/My Projects/all-projects/woodenculture/frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/mustkeem/Documents/My Projects/all-projects/woodenculture/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { API_URL } from \"../../config\";\nimport axios from \"axios\";\nimport { loginSucess, login as loginInitiate, getUserStatus as getUserStatusAction } from \"./actions\";\nexport var login = function login(payload) {\n  return function (dispatch) {\n    dispatch(loginInitiate());\n    return axios({\n      method: \"post\",\n      url: API_URL + \"/auth/login\",\n      data: payload\n    }).then(function (response) {\n      localStorage.setItem(\"woodenculture-token\", response.data.token);\n      var data = response.data;\n      data.isLogedin = true;\n      dispatch(loginSucess(data));\n      return data;\n    })[\"catch\"](function (error) {\n      console.log(error);\n      return {\n        isLogedin: false\n      };\n    });\n  };\n};\nexport var signup = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(payload) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", axios({\n              method: \"put\",\n              url: API_URL + \"/auth/signup\",\n              data: payload\n            }).then(function (response) {\n              return {\n                status: true\n              };\n            })[\"catch\"](function (error) {\n              return {\n                status: false\n              };\n            }));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function signup(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getUserStatus = function getUserStatus(payload) {\n  return function (dispatch) {\n    return axios({\n      method: \"get\",\n      url: API_URL + \"/auth/status\",\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"woodenculture-token\")\n      }\n    }).then(function (response) {\n      var data = response.data;\n      data.isLogedin = true;\n      console.log(\"testddddd\", data);\n      dispatch(getUserStatusAction(data));\n      return data;\n    })[\"catch\"](function (error) {\n      return {\n        isLogedin: false\n      };\n    });\n  };\n};","map":{"version":3,"sources":["/home/mustkeem/Documents/My Projects/all-projects/woodenculture/frontend/store-thunk/common/api.js"],"names":["API_URL","axios","loginSucess","login","loginInitiate","getUserStatus","getUserStatusAction","payload","dispatch","method","url","data","then","response","localStorage","setItem","token","isLogedin","error","console","log","signup","status","headers","Authorization","getItem"],"mappings":";;AAAA,SAASA,OAAT,QAAwB,cAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SACEC,WADF,EAEEC,KAAK,IAAIC,aAFX,EAGEC,aAAa,IAAIC,mBAHnB,QAIO,WAJP;AAMA,OAAO,IAAMH,KAAK,GAAG,SAARA,KAAQ,CAACI,OAAD;AAAA,SAAa,UAACC,QAAD,EAAc;AAC9CA,IAAAA,QAAQ,CAACJ,aAAa,EAAd,CAAR;AACA,WAAOH,KAAK,CAAC;AACXQ,MAAAA,MAAM,EAAE,MADG;AAEXC,MAAAA,GAAG,EAAEV,OAAO,GAAG,aAFJ;AAGXW,MAAAA,IAAI,EAAEJ;AAHK,KAAD,CAAL,CAKJK,IALI,CAKC,UAAUC,QAAV,EAAoB;AACxBC,MAAAA,YAAY,CAACC,OAAb,CAAqB,qBAArB,EAA4CF,QAAQ,CAACF,IAAT,CAAcK,KAA1D;AACA,UAAML,IAAI,GAAGE,QAAQ,CAACF,IAAtB;AACAA,MAAAA,IAAI,CAACM,SAAL,GAAiB,IAAjB;AACAT,MAAAA,QAAQ,CAACN,WAAW,CAACS,IAAD,CAAZ,CAAR;AACA,aAAOA,IAAP;AACD,KAXI,WAYE,UAAUO,KAAV,EAAiB;AACtBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACA,aAAO;AAAED,QAAAA,SAAS,EAAE;AAAb,OAAP;AACD,KAfI,CAAP;AAgBD,GAlBoB;AAAA,CAAd;AAoBP,OAAO,IAAMI,MAAM;AAAA,sEAAG,iBAAOd,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA,6CACbN,KAAK,CAAC;AACXQ,cAAAA,MAAM,EAAE,KADG;AAEXC,cAAAA,GAAG,EAAEV,OAAO,GAAG,cAFJ;AAGXW,cAAAA,IAAI,EAAEJ;AAHK,aAAD,CAAL,CAKJK,IALI,CAKC,UAAUC,QAAV,EAAoB;AACxB,qBAAO;AAAES,gBAAAA,MAAM,EAAE;AAAV,eAAP;AACD,aAPI,WAQE,UAAUJ,KAAV,EAAiB;AACtB,qBAAO;AAAEI,gBAAAA,MAAM,EAAE;AAAV,eAAP;AACD,aAVI,CADa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAND,MAAM;AAAA;AAAA;AAAA,GAAZ;AAcP,OAAO,IAAMhB,aAAa,GAAG,SAAhBA,aAAgB,CAACE,OAAD;AAAA,SAAa,UAACC,QAAD,EAAc;AACtD,WAAOP,KAAK,CAAC;AACXQ,MAAAA,MAAM,EAAE,KADG;AAEXC,MAAAA,GAAG,EAAEV,OAAO,GAAG,cAFJ;AAGXuB,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAE,YAAYV,YAAY,CAACW,OAAb,CAAqB,qBAArB;AADpB;AAHE,KAAD,CAAL,CAOJb,IAPI,CAOC,UAAUC,QAAV,EAAoB;AACxB,UAAMF,IAAI,GAAGE,QAAQ,CAACF,IAAtB;AACAA,MAAAA,IAAI,CAACM,SAAL,GAAiB,IAAjB;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBT,IAAzB;AACAH,MAAAA,QAAQ,CAACF,mBAAmB,CAACK,IAAD,CAApB,CAAR;AACA,aAAOA,IAAP;AACD,KAbI,WAcE,UAAUO,KAAV,EAAiB;AACtB,aAAO;AAAED,QAAAA,SAAS,EAAE;AAAb,OAAP;AACD,KAhBI,CAAP;AAiBD,GAlB4B;AAAA,CAAtB","sourcesContent":["import { API_URL } from \"../../config\";\r\nimport axios from \"axios\";\r\nimport {\r\n  loginSucess,\r\n  login as loginInitiate,\r\n  getUserStatus as getUserStatusAction,\r\n} from \"./actions\";\r\n\r\nexport const login = (payload) => (dispatch) => {\r\n  dispatch(loginInitiate());\r\n  return axios({\r\n    method: \"post\",\r\n    url: API_URL + \"/auth/login\",\r\n    data: payload,\r\n  })\r\n    .then(function (response) {\r\n      localStorage.setItem(\"woodenculture-token\", response.data.token);\r\n      const data = response.data;\r\n      data.isLogedin = true;\r\n      dispatch(loginSucess(data));\r\n      return data;\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n      return { isLogedin: false };\r\n    });\r\n};\r\n\r\nexport const signup = async (payload) => {\r\n  return axios({\r\n    method: \"put\",\r\n    url: API_URL + \"/auth/signup\",\r\n    data: payload,\r\n  })\r\n    .then(function (response) {\r\n      return { status: true };\r\n    })\r\n    .catch(function (error) {\r\n      return { status: false };\r\n    });\r\n};\r\n\r\nexport const getUserStatus = (payload) => (dispatch) => {\r\n  return axios({\r\n    method: \"get\",\r\n    url: API_URL + \"/auth/status\",\r\n    headers: {\r\n      Authorization: \"Bearer \" + localStorage.getItem(\"woodenculture-token\"),\r\n    },\r\n  })\r\n    .then(function (response) {\r\n      const data = response.data;\r\n      data.isLogedin = true;\r\n      console.log(\"testddddd\", data);\r\n      dispatch(getUserStatusAction(data));\r\n      return data;\r\n    })\r\n    .catch(function (error) {\r\n      return { isLogedin: false };\r\n    });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}